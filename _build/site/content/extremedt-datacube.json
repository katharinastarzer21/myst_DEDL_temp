{"version":2,"kind":"Notebook","sha256":"9f9974e9121dd93574a1ea726d5d1c5017487c85f7e84f69b680fd2007cf0c84","slug":"extremedt-datacube","location":"/STACK/ExtremeDT-DataCube.ipynb","dependencies":[],"frontmatter":{"title":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","content_includes_title":true,"kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":2}},"thumbnail":"/b27bd30f978ddf0848f3ea0942070886.jpeg","exports":[{"format":"ipynb","filename":"ExtremeDT-DataCube.ipynb","url":"/ExtremeDT-DataCube-c73ffd0f1ef8170ab89e3a8953f92471.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/b27bd30f978ddf0848f3ea0942070886.jpeg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CKSGqnjJwo","urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/img/DestinE-banner.jpg?raw=true"}],"key":"Zn1jlyhpns"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Licence","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uXi4sUKV1I"}],"key":"l4v95GLWpP"},{"type":"text","value":": MIT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mk1aCCI9Ab"},{"type":"break","key":"tsi6DlR2ky"}],"key":"H258tiL7hQ"},{"type":"heading","depth":1,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DJ467CXpcp"}],"identifier":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","label":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","html_id":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","implicit":true,"key":"qGfSyrWQyb"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This notebook covers:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"No3VHI5NRl"}],"key":"dn9h5yNkl5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"find available data cubes and their urls","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yZoOU6c1oq"}],"key":"F4w7Jqi20A"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"upload data cube","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"I9teZwx3gd"}],"key":"m6gCCDQ88w"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"plot map for desired area, time and variable","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"yKMcu8Maw2"}],"key":"HYF1rIUpdT"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"plot time series chart for selected variable in specifc time for specific location","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Imwoj7UmsV"}],"key":"K4rGfFBHld"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"create interactive dashboard using xcube - xviewer","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"srCjSBiSIe"}],"key":"pqSjcMGhnV"}],"key":"CrZaCNp4aS"}],"key":"oBAIQy6gzA"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prepre your environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S0nEAtxhzY"}],"identifier":"prepre-your-environment","label":"Prepre your environment","html_id":"prepre-your-environment","implicit":true,"key":"r8sjWakxaS"}],"key":"vrolLiMS89"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport dask\nimport requests","visibility":"show","key":"RF7vaKdwSO"},{"type":"output","id":"CAQndXell8xWmKk_ACdzW","data":[],"visibility":"show","key":"zAcSusWXkb"}],"visibility":"show","key":"TgWOm3Jvbr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connect with Extreme DT data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FkJFjTR4Qy"}],"identifier":"connect-with-extreme-dt-data-cube","label":"Connect with Extreme DT data cube","html_id":"connect-with-extreme-dt-data-cube","implicit":true,"key":"pglF6dvlop"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data cube provides data:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"I0rhafgbgc"}],"key":"K5NoGdTpsb"}],"key":"oS3OBtrWxR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Four variables","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"M9KGee9U2f"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"2t - Air temperature at 2 meters above grond [K]","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DQFv3Rp4Vl"}],"key":"qV4wEHB6Lx"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2d - Dew point temperature at 2 meters above grond [K]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kRrZMr8NVC"}],"key":"Ft36jHbZtC"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"sp - Surface pressure [Pa]","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"dMjUjQuXDS"}],"key":"Ha1Ma0oLhP"}],"key":"AgUIMvun54"}],"key":"Jdy4VbSKcp"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Forecast from 10.04.2024 + 96 hours","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"eZ3SYX0rTD"}],"key":"f3dWwQrH3y"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Hourly step","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"X1dcAdiGFj"}],"key":"mJXnm1Ikew"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"World","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"eGO90qP2sK"}],"key":"IaujgakJA4"}],"key":"vdIBQNUI48"}],"key":"FsBpEkWq97"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select proper data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UawNDKxLEw"}],"identifier":"select-proper-data-cube","label":"Select proper data cube","html_id":"select-proper-data-cube","implicit":true,"key":"mGah4JsjMj"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data cubes on s3 bucket are stored under URL ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"roOt7xOjWW"},{"type":"link","url":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​s3​.central​.data​.destination​-earth​.eu​/swift​/v1​/dedl​_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wVk9d1BMeb"}],"urlSource":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","key":"t0oyEnNrPK"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BYf8Bn4bgp"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"de7ourVHTP"},{"type":"text","value":"Data cubes are stored in two directories:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xsaWybhCr6"}],"key":"p1fGYHP1jt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"ExtremeDT - the newest one","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jmqybnBM4A"}],"key":"gNk63o0B9T"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"archive - from prievous days","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"spVhsmgILe"}],"key":"d8YyrxDiJs"}],"key":"B40VZvo5LA"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"File nameing convention:","key":"BQ19Cz2Ojc"}],"key":"EAcsyzIFYG"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gmACHZZcQm"},{"type":"text","value":"dt_extreme_YYYYMMDD.zarr/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qoJinp7OMx"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DqgzURhnj0"},{"type":"text","value":"YYYYMMDD - is the date when forecast starts (step 0)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PVpWz1rCKf"}],"key":"UyKHM21Xk4"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Results","key":"V8Bz1omyun"}],"key":"qUDcsEakVx"},{"type":"break","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FsAJLu9Mco"},{"type":"text","value":"After exectution of code below, the list of urls linked to available cubes will be printed.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"oojDBYZByu"}],"key":"JdhD7bEp1w"}],"key":"QmQAY68wDz"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# URL to s3 where  ExtremeDT data cubes are stored\ndatacube_url = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube'\nresponse = requests.get(datacube_url)\n\nif response.status_code == 200:\n    lines = response.text.splitlines()\n    zarr_items = [line for line in lines if line.endswith(\".zarr\") or line.endswith(\".zarr/\")]\n    if zarr_items:\n        for item in zarr_items:\n            print(item)\n            new_url = f\"{datacube_url}/{item}\"\n            print(\"New URL:\", new_url)\n    else:\n        print(\"No .zarr files or directories found.\")\nelse:\n    print(\"Failed to fetch contents. Status code:\", response.status_code)\n","visibility":"show","key":"TBffiR0As4"},{"type":"output","id":"sjt7O3Z3xfgZZy9Rh_1Ul","data":[{"name":"stdout","output_type":"stream","text":"ExtremeDT/dt_extreme_20240410.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/\narchive/dt_extreme_20240409.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/archive/dt_extreme_20240409.zarr/\n"}],"visibility":"show","key":"w08LfPxwtC"}],"visibility":"show","key":"rl90wNLp8d"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get info about the newset data cube.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MqT5HR9sYg"}],"key":"y4V3jpWzZS"}],"key":"f0Dfp6cYFW"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Paste into url variable link to the newest data cube\nurl = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/'","visibility":"show","key":"CZZPGwPecR"},{"type":"output","id":"7Sx7dNN9CDly_ZwzdxdWl","data":[],"visibility":"show","key":"zlOmK7A3Hr"}],"visibility":"show","key":"cSiqdNEOMv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s make some test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aUxWhxprGC"}],"identifier":"lets-make-some-test","label":"Let’s make some test","html_id":"lets-make-some-test","implicit":true,"key":"uNAd5IjMK8"}],"key":"XK5txIEBP8"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Area of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jxnkoNCKfI"}],"identifier":"area-of-interest","label":"Area of interest","html_id":"area-of-interest","implicit":true,"key":"kPkV7h3TcS"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Upload data for selected area and verify what variables are provided. In this case uplaod data for Africa. List of available variables should be returend.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"DtRXaTxs65"}],"key":"HD1cWp5CuG"}],"key":"XFiihEtZTj"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                                         )\n\nlist(africa_dt.keys())","visibility":"show","key":"u6ekP2klZ3"},{"type":"output","id":"V2HDluwpd7N9abGvy5ZzR","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['2d', '2t', 'sp']","content_type":"text/plain"}}}],"visibility":"show","key":"a71MWUinLU"}],"visibility":"show","key":"NERL7rmmk5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of air temperature for Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RLvhqOOJIY"}],"key":"HGhiL14BhO"}],"key":"k0ryYo0kew"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt['2t'][0, 0] - 273.15 # Conversion to Celcius degrees\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='coolwarm')\nplt.colorbar(label='Temperature (°C)')\nplt.title('Temperature Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"EGO9vbKL1y"},{"type":"output","id":"8FwxWgwPUz9U0qHT6_yd3","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"25594f9b3cb66793800b1d9b0a416d34","path":"/25594f9b3cb66793800b1d9b0a416d34.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"tSKLdzSheC"}],"visibility":"show","key":"bRzgiFZTSD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get data for specific time range","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YViiAwwfsB"}],"identifier":"get-data-for-specific-time-range","label":"Get data for specific time range","html_id":"get-data-for-specific-time-range","implicit":true,"key":"ATxH6rV3qa"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Get data from 10st of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xz6h1g0XAN"}],"key":"etN8VrRphB"}],"key":"NfJ1tXWa8A"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.time)","visibility":"show","key":"QO9ymOU77g"},{"type":"output","id":"cwV-WqMfx0CRGnG56dzgU","data":[{"name":"stdout","output_type":"stream","text":"<xarray.DataArray 'time' (time: 25)>\narray(['2024-04-10T00:00:00.000000000', '2024-04-10T01:00:00.000000000',\n       '2024-04-10T02:00:00.000000000', '2024-04-10T03:00:00.000000000',\n       '2024-04-10T04:00:00.000000000', '2024-04-10T05:00:00.000000000',\n       '2024-04-10T06:00:00.000000000', '2024-04-10T07:00:00.000000000',\n       '2024-04-10T08:00:00.000000000', '2024-04-10T09:00:00.000000000',\n       '2024-04-10T10:00:00.000000000', '2024-04-10T11:00:00.000000000',\n       '2024-04-10T12:00:00.000000000', '2024-04-10T13:00:00.000000000',\n       '2024-04-10T14:00:00.000000000', '2024-04-10T15:00:00.000000000',\n       '2024-04-10T16:00:00.000000000', '2024-04-10T17:00:00.000000000',\n       '2024-04-10T18:00:00.000000000', '2024-04-10T19:00:00.000000000',\n       '2024-04-10T20:00:00.000000000', '2024-04-10T21:00:00.000000000',\n       '2024-04-10T22:00:00.000000000', '2024-04-10T23:00:00.000000000',\n       '2024-04-11T00:00:00.000000000'], dtype='datetime64[ns]')\nCoordinates:\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    axis:           T\n    standard_name:  time\n"}],"visibility":"show","key":"fwDpJxItV2"}],"visibility":"show","key":"TXK7qJvYIF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain data for specific variable and time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GmlCDSMu9z"}],"identifier":"obtain-data-for-specific-variable-and-time","label":"Obtain data for specific variable and time","html_id":"obtain-data-for-specific-variable-and-time","implicit":true,"key":"H8Sbso5R7U"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Obtain surface pressure data from 10th of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Mh8jh40foH"}],"key":"RvTBBP7gF1"}],"key":"BDF8ITB43h"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url)['sp'].sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.var)","visibility":"show","key":"ocxXjyX2Xt"},{"type":"output","id":"zPecHPJUOrRGBc4SwWbsE","data":[{"name":"stdout","output_type":"stream","text":"<bound method DataArrayAggregations.var of <xarray.DataArray 'sp' (time: 25, lat: 2276, lon: 2279)>\ndask.array<getitem, shape=(25, 2276, 2279), dtype=float32, chunksize=(25, 417, 837), chunktype=numpy.ndarray>\nCoordinates:\n  * lat      (lat) float64 39.99 39.95 39.92 39.88 ... -39.92 -39.95 -39.99\n  * lon      (lon) float64 -19.97 -19.94 -19.9 -19.87 ... 59.92 59.95 59.99\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    CDI_grid_num_LPE:  2560\n    CDI_grid_type:     gaussian\n    long_name:         Surface pressure\n    param:             0.3.0\n    standard_name:     surface_air_pressure\n    units:             Pa>\n"}],"visibility":"show","key":"E6WdU9l3sZ"}],"visibility":"show","key":"E1lXxfR0in"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of surface pressure over Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wJCQwOzom3"}],"key":"gQ4MjDletw"}],"key":"GnmfWuZZX7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt[0] / 100    # Conversion to hectoPascals\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='viridis')\nplt.colorbar(label='Surface Pressure (hPa)')\nplt.title('Surface pressure Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"GTMVCf8Kf3"},{"type":"output","id":"a4fC1pNPOTFIWSHiZkgb5","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57d5b6f621ee4b704d66932aa12f16a7","path":"/57d5b6f621ee4b704d66932aa12f16a7.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"C6udhlSfYP"}],"visibility":"show","key":"m9jMKmW0lL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E8BKuBGcGl"}],"identifier":"time-series","label":"Time series","html_id":"time-series","implicit":true,"key":"UOhMDmtxR8"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Verify if it is possible to create time series chart (for 96 hours) from DT output - air temperature over Nairobi.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dWij3qI6Ua"}],"key":"umKTTg8sY6"}],"key":"TnxSH2Mlkv"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                )\n                                                    ","visibility":"show","key":"FKqdyV1xh1"},{"type":"output","id":"y2qIZcuEnQeijeadHvw-x","data":[],"visibility":"show","key":"lDYLaDgPUR"}],"visibility":"show","key":"c7YKRKwpil"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a chart.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LO6NDoTHUz"}],"key":"qy6TK0Lvb8"}],"key":"U0VCppOhKX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define Nairobi coordinates\nnairobi_lat = -1.286389\nnairobi_lon = 36.817223\n\nlat = africa_dt['lat']\nlon = africa_dt['lon']\nnearest_lat_idx = np.abs(lat - nairobi_lat).argmin()\nnearest_lon_idx = np.abs(lon - nairobi_lon).argmin()\n\ntemperature_nairobi = africa_dt['2t'][:, :, nearest_lat_idx, nearest_lon_idx] - 273.15\ntime_values = africa_dt.time.values\n\nplt.figure(figsize=(10, 6))\nplt.plot(time_values, temperature_nairobi, marker='o', color='b')\nplt.title('Air Temperature Time Series for Nairobi')\nplt.xlabel('Time')\nplt.ylabel('Temperature (°C)')\nplt.grid(True)\nplt.show()\n","visibility":"show","key":"sdm89slHhW"},{"type":"output","id":"1dUIis7jCuSxBetl9RGXF","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b61bf0f02adcece2bde436c11b668e6a","path":"/b61bf0f02adcece2bde436c11b668e6a.png"},"text/plain":{"content":"<Figure size 1000x600 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"C73JMbFSn9"}],"visibility":"show","key":"ADbMsx0pUC"}],"key":"YXX2JQhvWZ"},"references":{"cite":{"order":[],"data":{}}}}